

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>opppy.interactive_utils &mdash; OPPPY 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> OPPPY
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../opppy.html">opppy package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tests.html">tests package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OPPPY</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>opppy.interactive_utils</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for opppy.interactive_utils</h1><div class="highlight"><pre>
<span></span><span class="c1"># ---------------------------*-python-*----------------------------------------#</span>
<span class="c1"># file   interactive_utils.py</span>
<span class="c1"># author mathew cleveland</span>
<span class="c1"># date   February 2019</span>
<span class="c1"># note   Copyright (C) 2019, Los Alamos National Security, LLC.</span>
<span class="c1">#        All rights reserved.</span>
<span class="c1"># -----------------------------------------------------------------------------#</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Interactive utilities define a set of function for command line interaction</span>

<span class="sd">.. autosummary::</span>

<span class="sd">  get_option_num</span>
<span class="sd">  get_key_num_vec</span>
<span class="sd">  interactive_output_parser</span>
<span class="sd">  interactive_dump_parser</span>
<span class="sd">  interactive_tally_parser</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="k">import</span> <span class="n">listdir</span><span class="p">,</span> <span class="n">chdir</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="k">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">getmtime</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="k">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">opppy.version</span> <span class="k">import</span> <span class="n">__version__</span>
<span class="kn">from</span> <span class="nn">opppy.dump_utils</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.plot_dictionary</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.plot_dump_dictionary</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.output</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.plotting_help</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">opppy.tally</span> <span class="k">import</span> <span class="o">*</span>

<div class="viewcode-block" id="get_option_num"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.get_option_num">[docs]</a><span class="k">def</span> <span class="nf">get_option_num</span><span class="p">(</span><span class="n">nmax</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Interactive request for a valid number in a range from 1 to nmax provided</span>
<span class="sd">    to the user</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">nvar</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the option number for the variable to plot - &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nvar</span> <span class="o">==</span> <span class="s1">&#39;-q&#39;</span> <span class="ow">or</span> <span class="n">nvar</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">nvar</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">nvar</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">nvar</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">nvar</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">nvar</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">nvar</span> <span class="o">&gt;</span> <span class="n">nmax</span><span class="p">:</span> <span class="k">raise</span>
        <span class="k">except</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Must chose between 1 and &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nmax</span><span class="p">))</span>
          <span class="k">continue</span>
        <span class="k">break</span>
    <span class="k">return</span> <span class="n">nvar</span></div>

<div class="viewcode-block" id="get_option_series_value"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.get_option_series_value">[docs]</a><span class="k">def</span> <span class="nf">get_option_series_value</span><span class="p">(</span><span class="n">series_name</span><span class="p">,</span> <span class="n">series_data</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Interactive request for a valid series value</span>

<span class="sd">    arguments:</span>
<span class="sd">        series_name - string </span>
<span class="sd">        series_data - numpy.array of available series data</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the series location value (&#39;</span><span class="o">+</span><span class="n">series_name</span><span class="o">+</span><span class="s1">&#39; min=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">series_data</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; max=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">series_data</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;) [default uses max_value]: &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;-q&#39;</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;max_value&#39;</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">series_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">series_data</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
          <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">(</span><span class="n">series_data</span><span class="p">)</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="nb">max</span><span class="p">(</span><span class="n">series_data</span><span class="p">):</span> <span class="k">raise</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Must chose between&quot;</span><span class="o">+</span><span class="s1">&#39; min=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">series_data</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; max=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">series_data</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; : &#39;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">break</span>
    <span class="k">return</span> <span class="n">value</span></div>



<div class="viewcode-block" id="get_key_num_vec"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.get_key_num_vec">[docs]</a><span class="k">def</span> <span class="nf">get_key_num_vec</span><span class="p">(</span><span class="n">keys</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Interactive request for a valid set of numbers (e.g. [1, 2, 5]) in a range</span>
<span class="sd">    from 1 to nmax provided to the user</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">nmax</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">nvar</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter the option number to plot (this can be a vector [1,2,3,..]) - &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nvar</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">nvar</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="n">nvar</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="c1"># split number verctor</span>
        <span class="n">nvar</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">,</span> <span class="n">nvar</span><span class="p">)</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">nvar</span><span class="p">:</span>
          <span class="k">try</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">val</span> <span class="o">&gt;</span> <span class="n">nmax</span><span class="p">:</span> <span class="k">raise</span>
            <span class="n">vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
          <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Must chose between 1 and &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nmax</span><span class="p">))</span>
            <span class="k">continue</span>
        <span class="k">break</span>

    <span class="n">return_keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
        <span class="n">return_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">val</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">return_keys</span></div>
 
<div class="viewcode-block" id="interactive_output_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser">[docs]</a><span class="k">class</span> <span class="nc">interactive_output_parser</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is an interactive output parser and plotting class. It provides three</span>
<span class="sd">    basic interactive options:</span>
<span class="sd">        pickle_output generates a pickled python dictionary to be used for plotting</span>
<span class="sd">        plot_output provides pre-formated interactive plotting</span>
<span class="sd">        plot_dictionary provides command line dictionary plotting of pickled python dictionaries</span>

<span class="sd">    A user must supply:</span>
<span class="sd">        opppy_parser a user define parser to extract cycle dictionary data from a user defined outputfile</span>
<span class="sd">        option_string a user defined string the specifies dictionary plotting options</span>
<span class="sd">        argument_parser a user defined argparser object to attach the subparser options to</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opppy_parser</span><span class="p">,</span> <span class="n">option_string</span><span class="p">,</span> <span class="n">argument_parser</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span> <span class="o">=</span> <span class="n">opppy_parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_string</span> <span class="o">=</span> <span class="n">option_string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">argument_parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Output options&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickle_output_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_dictionary_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_output_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>

<div class="viewcode-block" id="interactive_output_parser.append_pickle"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.append_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">append_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        append_pickle - </span>
<span class="sd">          This function generates/appends a opppy pickle file of dictionary</span>
<span class="sd">          data from an output file.</span>
<span class="sd">        </span>
<span class="sd">          arguments:</span>
<span class="sd">            args - Parsed input arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appending to the existing pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating a new pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
    
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">__version__</span><span class="p">):</span>
          <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: pickle file does not match this version of OPPPY&quot;</span><span class="p">)</span>
          <span class="k">if</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;was build with version&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">])</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot; has no version&quot;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This version of OPPPY is &quot;</span><span class="p">,</span> <span class="n">__version__</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Delete the old &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;file and rebuild it&quot;</span><span class="p">)</span>
          <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
        <span class="c1"># append new dictionary data to the pickle file</span>
        <span class="n">append_output_dictionary</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">output_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">append_date</span><span class="p">)</span>
    
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot;wb&quot;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output Data Saved To: &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="interactive_output_parser.pickle_output_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.pickle_output_parser">[docs]</a>    <span class="k">def</span> <span class="nf">pickle_output_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="n">pickle_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;pickle&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: pickle_output --pickle_file your_output_pickle_file.p --output_files you_output_files_to_pickle  &quot;</span><span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-of&#39;</span><span class="p">,</span><span class="s1">&#39;--output_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;output_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;output files to generate/append the pickle file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_file&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Pickle file name to be created or appended to&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-ad&#39;</span><span class="p">,</span><span class="s1">&#39;--append_date&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;append_date&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Append the date and time to the output file name&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">append_pickle</span><span class="p">)</span></div>
 

<div class="viewcode-block" id="interactive_output_parser.plot_dictionary_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.plot_dictionary_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_dictionary_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Add a parser for the dictionary plotter to a user provided subparser</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: plot_dictionary -pf your_pickle_file.p --dictionary_name mat_eng --x_data time --y_data mat_name  &quot;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span> <span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-of&#39;</span><span class="p">,</span><span class="s1">&#39;--output_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;output_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;output files to be parsed and plotted (output_file1.txt output_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span> <span class="o">=</span> <span class="n">plot_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_dictionary</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.plot_dictionary"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.plot_dictionary">[docs]</a>    <span class="k">def</span> <span class="nf">plot_dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Command line based dictionary plotting tool.</span>
<span class="sd">    </span>
<span class="sd">        arguments:</span>
<span class="sd">            args parsed dictionary plotting arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">dictionaries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">file_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">output_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dictionaries</span><span class="p">,</span> <span class="n">file_names</span> <span class="o">=</span> <span class="n">build_output_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">output_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># get the dictionaries from the pickle files</span>
            <span class="n">file_names</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span>
            <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">pickle_data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
                <span class="n">dictionaries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_data</span><span class="p">)</span>
    
        <span class="c1"># plot dictionaries based on input arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">plot_dict</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="n">dictionaries</span><span class="p">,</span><span class="n">file_names</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.plot_output_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.plot_output_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_output_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="n">plot_output_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;iplot&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Load a previously created pickle files (your_run.p) for interactive plotting or a set of output files to be parsed and plotted&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_output_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span> <span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-of&#39;</span><span class="p">,</span><span class="s1">&#39;--output_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;output_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;output files to be parsed and plotted (output_file1.txt output_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        <span class="n">plot_output_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_output</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.get_plot_option"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.get_plot_option">[docs]</a>    <span class="k">def</span> <span class="nf">get_plot_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Interactive request for valid plotting options</span>
<span class="sd">    </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
          <span class="n">opt</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Additional options (-h for list and -q to quit): &#39;</span><span class="p">)</span>
          <span class="n">input_args</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
          <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interactive_plot_parser</span><span class="p">()</span>
          <span class="k">try</span><span class="p">:</span>
            <span class="n">args</span><span class="o">=</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">input_args</span><span class="p">)</span>
            <span class="k">break</span>
          <span class="k">except</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
          
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">quit</span><span class="p">:</span>
          <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
        <span class="k">return</span> <span class="n">args</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.get_interactive_plot_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.get_interactive_plot_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_interactive_plot_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      return parser object that contains interactive plotting options</span>
<span class="sd">    </span>
<span class="sd">      &#39;&#39;&#39;</span>
    
      <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot; Output Plotting options &quot;</span><span class="p">,</span> 
        <span class="n">epilog</span> <span class="o">=</span><span class="s2">&quot; Specify the desired plotting options &quot;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-q&#39;</span><span class="p">,</span><span class="s1">&#39;--quit&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;quit&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;quit program&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span><span class="s1">&#39;--new&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;new&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;generate a new plot&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-bg&#39;</span><span class="p">,</span><span class="s1">&#39;--background&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;background&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keep plot in background&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span><span class="s1">&#39;--plot&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;re-open plot&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span><span class="s1">&#39;--labels&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;legend_labels&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify the legend labels [line1_label, line2_label,...]&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-rs&#39;</span><span class="p">,</span><span class="s1">&#39;--resize&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;plot_size&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify the plot size [x_size, y_size]&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    
      <span class="n">add_plot_options</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">parser</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.plot_output"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.plot_output">[docs]</a>    <span class="k">def</span> <span class="nf">plot_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is an interactive plotter for a python dictionary.</span>
<span class="sd">        The plotting option are specified via an option string.</span>
<span class="sd">        </span>
<span class="sd">        arguments:</span>
<span class="sd">          args - argeparse data structure with pickle name info</span>
<span class="sd">          option_string - a string to be passed to get_plot_options for pre-designed plots</span>
<span class="sd">    </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">dictionary_data</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">dictionary_names</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">output_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dictionary_data</span><span class="p">,</span> <span class="n">dictionary_names</span> <span class="o">=</span> <span class="n">build_output_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">output_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># We no longer flatten this data</span>
            <span class="c1">#file_list = []</span>
            <span class="c1">#for sublist in args.pickle_files:</span>
            <span class="c1">#  for item in sublist:</span>
            <span class="c1">#    file_list.append(item)</span>
            <span class="c1"># get the dictionaries from the pickle files</span>
            <span class="k">for</span> <span class="n">pickle_file_name</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)))</span>

        <span class="n">option_parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interactive_plot_parser</span><span class="p">()</span>
        <span class="n">option</span> <span class="o">=</span> <span class="n">option_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s2">&quot;--new&quot;</span><span class="p">])</span>
        <span class="n">ptype</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">new</span> <span class="ow">or</span> <span class="n">option</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="n">close</span><span class="p">()</span>
            <span class="n">plot_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option_string</span><span class="p">)</span>
     
            <span class="n">xsize</span> <span class="o">=</span> <span class="mi">8</span>
            <span class="n">ysize</span> <span class="o">=</span> <span class="mi">5</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="n">ysize</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">PyPloter</span><span class="o">.</span><span class="n">switch_backend</span><span class="p">(</span><span class="s1">&#39;agg&#39;</span><span class="p">)</span>
                <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="n">ysize</span><span class="p">))</span>
    
            <span class="n">xlog_flag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ylog_flag</span> <span class="o">=</span> <span class="mi">0</span>
    
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">)):</span>
              <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">dictionary_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span><span class="mi">2</span><span class="p">):</span>
              <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">counter</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">  </span><span class="si">%3i</span><span class="s1"> </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
              <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
    
            <span class="n">plot_num</span> <span class="o">=</span> <span class="n">get_option_num</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">plot_num</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">plot_args</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">plot_num</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;select_key&quot;</span><span class="p">:</span>    
                <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dictionary_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">plot_args</span><span class="o">.</span><span class="n">dictionary_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">keys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;cycle&#39;</span><span class="p">)</span>
                <span class="n">keys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">))),</span><span class="n">keys</span><span class="p">):</span> 
                  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                  <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span> <span class="o">=</span> <span class="n">get_key_num_vec</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    
          <span class="n">last_xmin</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_xmax</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_ymin</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_ymax</span> <span class="o">=</span> <span class="kc">None</span>
    
          <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dictionary_data</span><span class="p">,</span> <span class="n">dictionary_names</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">dictionary_name</span><span class="p">]</span>
    
            <span class="n">xmin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">plabels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">xmin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
            <span class="n">xmax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
            <span class="n">ymin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
            <span class="n">ymax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
            <span class="c1"># material specific plot</span>
            <span class="k">for</span> <span class="n">yname</span> <span class="ow">in</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">:</span>
              <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
              <span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
              <span class="n">ymax</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
              <span class="n">plabels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">yname</span><span class="p">)</span>
              <span class="k">if</span> <span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">no_y_names</span><span class="p">):</span>
                  <span class="n">plabels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
              <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
    
            <span class="n">xmin</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last_xmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">last_xmin</span><span class="p">,</span><span class="n">xmin</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
              <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">last_xmax</span><span class="p">,</span><span class="n">xmax</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">last_ymin</span><span class="p">,</span><span class="n">ymin</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
              <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">last_ymax</span><span class="p">,</span><span class="n">ymax</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
              <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
              <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">last_xmin</span> <span class="o">=</span> <span class="n">xmin</span>
            <span class="n">last_xmax</span> <span class="o">=</span> <span class="n">xmax</span>
            <span class="n">last_ymin</span> <span class="o">=</span> <span class="n">ymin</span>
            <span class="n">last_ymax</span> <span class="o">=</span> <span class="n">ymax</span>
    
            <span class="n">xlab</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">x_label</span>
            <span class="n">ylab</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
              <span class="n">xmax</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
              <span class="n">ymax</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">x_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xlab</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">y_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">ylab</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plabels</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">):</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You specified more labels then there are plots&quot;</span><span class="p">)</span>
              <span class="k">else</span><span class="p">:</span>
                  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">)):</span>
                      <span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">plot_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">plot_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">option</span><span class="o">.</span><span class="n">plot_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
              <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
                <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
              <span class="n">logplot</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">log_x</span><span class="p">,</span><span class="n">option</span><span class="o">.</span><span class="n">log_y</span><span class="p">,</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">data_file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">output_file_temp</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">data_file_name</span> 
              <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="n">outfile_name</span> <span class="o">=</span> <span class="n">output_file_temp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span><span class="s1">&#39;num&#39;</span><span class="p">)</span>
                <span class="n">outfile</span> <span class="o">=</span>  <span class="nb">open</span><span class="p">(</span><span class="n">outfile_name</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;# &quot;</span><span class="p">,</span> <span class="n">xlab</span><span class="p">,</span> <span class="n">ylab</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%15e</span><span class="s1">  </span><span class="si">%15e</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data written to - &quot;</span><span class="p">,</span> <span class="n">outfile_name</span><span class="p">)</span>
                <span class="n">outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
      
            <span class="n">xlabel</span><span class="p">(</span><span class="n">xlab</span><span class="p">)</span>
            <span class="n">ylabel</span><span class="p">(</span><span class="n">ylab</span><span class="p">)</span>
            
            <span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw_frame</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">xlim</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
              <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
            <span class="n">draw</span><span class="p">()</span>
    
    
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">figure_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">savefig</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">figure_name</span><span class="p">)</span>
          
          <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
            <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
          <span class="n">option</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plot_option</span><span class="p">()</span>
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="n">figure</span><span class="p">()</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">clf</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.get_plot_options"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.get_plot_options">[docs]</a>    <span class="k">def</span> <span class="nf">get_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_string</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      Get pre-formated plotting options for the interactive ploter</span>
<span class="sd">       </span>
<span class="sd">      Input Options:</span>
<span class="sd">        label_string preformated string for expected data in a</span>
<span class="sd">        dictionary</span>
<span class="sd">    </span>
<span class="sd">      This expects a two column semicolon (;) separated text</span>
<span class="sd">      format string. The first column is an arbitrary string that</span>
<span class="sd">      will be printed by the interactive plotter as a plot the</span>
<span class="sd">      user can pick. The second column in a dictionary plotting</span>
<span class="sd">      command (more details in the examples below).</span>
<span class="sd">    </span>
<span class="sd">      examples:</span>
<span class="sd">        &quot;your first fancy plot name; -dn your_dictionary_key -x your_x_data_key   -xlab &quot;time [s]&quot;  -y your_y_data_key  -ylab &quot;RSS [%]&quot;;</span>
<span class="sd">        &quot;your second fancy plot name; -dn your_dictionary_key -x time   -xlab &quot;time [s]&quot;  -y select_key  -ylab &quot;RSS [%]&quot;;</span>
<span class="sd">    </span>
<span class="sd">     The dictionary plotting command has some basic requirements</span>
<span class="sd">     include a dictionary name (-dn) the x variable key (-x), the y</span>
<span class="sd">     variable key (-y), the x axis lable (-xlab), and the y axis</span>
<span class="sd">     label (-y). There are more details about available plotting</span>
<span class="sd">     options in plot_dictionary.py. The &quot;-y select_key&quot; value is a</span>
<span class="sd">     magic key word that tells the interactive ploter to provide a</span>
<span class="sd">     list of all y_data options for the designated dictionary.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">plot_labels</span> <span class="o">=</span> <span class="p">[]</span>
    
      <span class="n">label_file</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">label_string</span><span class="p">)</span>
      <span class="n">raw</span> <span class="o">=</span> <span class="n">label_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">raw</span><span class="p">:</span>
          <span class="n">lines</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_output_plot_args</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">plot_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">plot_labels</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.parse_output_plot_args"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.parse_output_plot_args">[docs]</a>    <span class="k">def</span> <span class="nf">parse_output_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_string</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      Returns a set of parsed dictionary plotting options from an input_string</span>
<span class="sd">    </span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot; Output Plotting options &quot;</span><span class="p">,</span> 
        <span class="n">epilog</span> <span class="o">=</span><span class="s2">&quot; Specify the desired plotting options &quot;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span><span class="s1">&#39;--dictionary_name&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dictionary_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary that the plotting data is contained in&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span><span class="s1">&#39;--x_data&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;x_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary data to be plotted on the x axis.&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span><span class="s1">&#39;--y_data&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;y_value_names&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary data to be plotted on the y axis.&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
      <span class="n">add_plot_options</span><span class="p">(</span><span class="n">parser</span><span class="p">);</span>
    
      <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">input_string</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="interactive_output_parser.run"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_output_parser.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">input_string</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">input_string</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">input_string</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="interactive_dump_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser">[docs]</a><span class="k">class</span> <span class="nc">interactive_dump_parser</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is an interactive dump parser and plotting class. It provides three</span>
<span class="sd">    basic interactive options:</span>
<span class="sd">        plot_1D plot 1D data set from dump</span>
<span class="sd">        plot_2D plot 2D data set from dump</span>
<span class="sd">        plot_tracer plot data at a tracer location</span>


<span class="sd">    A user must supply:</span>
<span class="sd">        opppy_dump_parser a user define parser to extract cycle dictionary data from a user defined outputfile</span>
<span class="sd">        argument_parser a user defined argparser object to attach the subparser options to</span>

<span class="sd">    &#39;&#39;&#39;</span>
<div class="viewcode-block" id="interactive_dump_parser.__init__"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opppy_dump_parser</span><span class="p">,</span> <span class="n">argument_parser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        set the dump parser and build up the argument parser</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span> <span class="o">=</span> <span class="n">opppy_dump_parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">argument_parser</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">subparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Dump options&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;command&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickle_dumps_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_1d_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_2d_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_3d_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_series_point_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_series_line_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_series_contour_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_1d_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_1d_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_1d_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for 1D plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;1d&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: dump 1d -df my_dump.txt -x x -y temperature  &quot;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_names&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_names&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;name of dump files to be plotted&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to retrieve the dumps_names from&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span> <span class="o">=</span> <span class="n">plot_1d_dump_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_2d_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_2d_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_2d_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for 2D plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: dump 2d -df my_dump.txt -x x -y -d temperature &quot;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_names&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_names&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;name of dump file to be plotted&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to retrieve the dumps_name from&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d</span> <span class="o">=</span> <span class="n">plot_2d_dump_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_2d</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_3d_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_3d_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_3d_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for 3D plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;3d&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: dump 3d -df my_dump.txt -x x -y -z z -zs 5.0 -d temperature &quot;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_names&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_names&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;name of dump file to be plotted&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to retrieve the dumps_name from&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_3d</span> <span class="o">=</span> <span class="n">plot_3d_dump_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_3d</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_3d</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_3d"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_3d">[docs]</a>    <span class="k">def</span> <span class="nf">plot_3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">dictionaries</span> <span class="o">=</span> <span class="n">generate_dump_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dump_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_3d</span><span class="o">.</span><span class="n">plot_3d_slice</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dictionaries</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>


<div class="viewcode-block" id="interactive_dump_parser.plot_2d"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_2d">[docs]</a>    <span class="k">def</span> <span class="nf">plot_2d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">dictionaries</span> <span class="o">=</span> <span class="n">generate_dump_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dump_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d</span><span class="o">.</span><span class="n">plot_2d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dictionaries</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>



<div class="viewcode-block" id="interactive_dump_parser.plot_1d"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_1d">[docs]</a>    <span class="k">def</span> <span class="nf">plot_1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">dictionaries</span> <span class="o">=</span> <span class="n">generate_dump_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dump_names</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">dictionaries</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_names</span><span class="p">)</span></div>


<div class="viewcode-block" id="interactive_dump_parser.pickle_dumps_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.pickle_dumps_parser">[docs]</a>    <span class="k">def</span> <span class="nf">pickle_dumps_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="n">pickle_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;pickle&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: pickle --pickle_file your_dump_file_to_pickle.p --output_files you_output_files_to_pickle  &quot;</span><span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-df&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dump files to generate/append the pickle file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_file&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Pickle file name to be created or appended to&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pickle_dumps</span><span class="p">)</span></div>
 
<div class="viewcode-block" id="interactive_dump_parser.pickle_dumps"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.pickle_dumps">[docs]</a>    <span class="k">def</span> <span class="nf">pickle_dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This function generates/appends a opppy pickle file of dictionary</span>
<span class="sd">        data from an output file.</span>
<span class="sd">        </span>
<span class="sd">        arguments:</span>
<span class="sd">          args - Parsed input arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pickle Dumps&quot;</span><span class="p">)</span>
        <span class="n">dumps</span> <span class="o">=</span> <span class="p">{}</span> 
        <span class="n">dumps</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">dumps</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appending to the existing pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating a new pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
    
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">dumps</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">dumps</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">__version__</span><span class="p">):</span>
          <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: pickle file does not match this version of OPPPY&quot;</span><span class="p">)</span>
          <span class="k">if</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;was build with version&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">])</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot; has no version&quot;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This version of OPPPY is &quot;</span><span class="p">,</span> <span class="n">__version__</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Delete the old &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;file and rebuild it&quot;</span><span class="p">)</span>
          <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">append_dumps</span><span class="p">(</span><span class="n">dumps</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">dump_files</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">)</span>
    
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">dumps</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot;wb&quot;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dump Data Saved To: &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span></div>



<div class="viewcode-block" id="interactive_dump_parser.plot_series_point_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_point_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_point_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for tracer plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;point&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: plot_dictionary -pf your_pickle_file.p --dictionary_name mat_eng --x_data time --y_data mat_name  &quot;</span><span class="p">,</span> <span class="n">conflict_handler</span><span class="o">=</span><span class="s1">&#39;resolve&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-df&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dump files to be parsed and plotted (output_file1.txt output_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dk&#39;</span><span class="p">,</span><span class="s1">&#39;--dimension_keys&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dimension_keys&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the points (e.g. [x], [x,y], or [x,y,x]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span><span class="s1">&#39;--point&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;point&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;point location to extract data (e.g. [1], [1,2], or [1,2,3]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span><span class="s1">&#39;--series_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the series axis data (e.g. cycle or time)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span><span class="s1">&#39;--data_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;data_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the data (e.g. temperature, pressure, etc)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-im&#39;</span><span class="p">,</span><span class="s1">&#39;--interpolation_method&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;interpolation_method&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Method used to interpolate the data to points&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span> <span class="o">=</span> <span class="n">plot_1d_dump_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="c1"># suppress the x and y variable request</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span><span class="s1">&#39;--x_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;x_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span><span class="s1">&#39;--y_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;y_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_series_point</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_series_point"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_point">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="n">series_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">series_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dumps</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_files</span><span class="p">:</span>
                <span class="n">dictionary_list</span> <span class="o">=</span> <span class="n">build_data_list</span><span class="p">(</span><span class="n">dumps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">)</span>
                <span class="n">tracer_x</span><span class="p">,</span> <span class="n">tracer_y</span> <span class="o">=</span> <span class="n">extract_series_point</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
                <span class="n">series_dictionary</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">series_dictionary</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_x</span><span class="p">)</span>
                <span class="n">series_dictionary</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_y</span><span class="p">)</span>
                <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">series_dictionary</span><span class="p">)</span>
                <span class="n">series_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dumps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">pickle_file</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">dictionary</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pickle_file</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
                <span class="n">dictionary</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">)</span>
                <span class="n">dictionary_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">dictionary_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="n">tracer_x</span><span class="p">,</span> <span class="n">tracer_y</span> <span class="o">=</span> <span class="n">extract_series_point</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point</span><span class="p">)</span> 
                <span class="n">series_dictionary</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">series_dictionary</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_x</span><span class="p">)</span>
                <span class="n">series_dictionary</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">tracer_y</span><span class="p">)</span>
                <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">series_dictionary</span><span class="p">)</span>
                <span class="n">series_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">args</span><span class="o">.</span><span class="n">x_value_name</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span>
        <span class="n">args</span><span class="o">.</span><span class="n">y_value_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">data_key</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d</span><span class="o">.</span><span class="n">plot_1d</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">,</span> <span class="n">series_names</span><span class="p">)</span></div>


<div class="viewcode-block" id="interactive_dump_parser.plot_series_line_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_line_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_line_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for tracer plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: plot_dictionary -pf your_pickle_file.p --dictionary_name mat_eng --x_data time --y_data mat_name  &quot;</span><span class="p">,</span> <span class="n">conflict_handler</span><span class="o">=</span><span class="s1">&#39;resolve&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-df&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dump files to be parsed and plotted (output_file1.txt output_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dk&#39;</span><span class="p">,</span><span class="s1">&#39;--dimension_keys&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dimension_keys&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the points (e.g. [x], [x,y], or [x,y,x]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-p0&#39;</span><span class="p">,</span><span class="s1">&#39;--point0&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;point0&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;beginning point location to extract data (e.g. [1], [1,2], or [1,2,3]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-p1&#39;</span><span class="p">,</span><span class="s1">&#39;--point1&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;point1&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;end point location to extract data (e.g. [1], [1,2], or [1,2,3]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span><span class="s1">&#39;--series_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the series axis data (e.g. cycle or time)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span><span class="s1">&#39;--data_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;data_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the data (e.g. temperature, pressure, etc)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-np&#39;</span><span class="p">,</span><span class="s1">&#39;--number_of_points&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;number_of_points&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Number of sample points used to extract the data&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">500</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-im&#39;</span><span class="p">,</span><span class="s1">&#39;--interpolation_method&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;interpolation_method&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Method used to interpolate the data to points&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d_series</span> <span class="o">=</span> <span class="n">plot_line_series_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d_series</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="c1"># suppress the x and y variable request</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span><span class="s1">&#39;--x_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;x_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span><span class="s1">&#39;--y_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;y_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_series_line</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_series_line"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_line">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        
        <span class="n">series_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">series_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dumps</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_files</span><span class="p">:</span>
                <span class="n">dictionary_list</span> <span class="o">=</span> <span class="n">build_data_list</span><span class="p">(</span><span class="n">dumps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">)</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_line</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point0</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point1</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
                <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">))</span>
                <span class="n">series_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dumps</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">pickle_file</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">dictionary</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pickle_file</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
                <span class="n">dictionary</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">)</span>
                <span class="n">dictionary_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="n">dictionary_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_line</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point0</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">point1</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
                <span class="n">series_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">))</span>

                <span class="n">series_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_file</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">args</span><span class="o">.</span><span class="n">x_value_name</span><span class="o">=</span><span class="s1">&#39;distance&#39;</span>
        <span class="n">args</span><span class="o">.</span><span class="n">y_value_name</span><span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">data_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_1d_series</span><span class="o">.</span><span class="n">plot_1d_series</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">,</span> <span class="n">series_names</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_series_contour_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_contour_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_contour_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Setup up a subparser for tracer plots</span>

<span class="sd">        Input arguments:</span>
<span class="sd">            subparser - A argparser subparser to append the plotting options to.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;contour&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: dump contour -dk x y -s time -d temperature &quot;</span><span class="p">,</span> <span class="n">conflict_handler</span><span class="o">=</span><span class="s1">&#39;resolve&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_file&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_file&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle file to be plotted&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-df&#39;</span><span class="p">,</span><span class="s1">&#39;--dump_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dump_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dump files to be parsed and plotted (output_file1.txt output_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-kw&#39;</span><span class="p">,</span><span class="s1">&#39;--key_words&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;key_words&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Only extract the specified key_words&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dk&#39;</span><span class="p">,</span><span class="s1">&#39;--dimension_keys&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dimension_keys&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the points dimensions in the dictionary (e.g. [x,y], or [my_x,my_y,my_z]&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-zs&#39;</span><span class="p">,</span><span class="s1">&#39;--z_slice_location&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;z_slice_location&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;location along the z plane to slice the data&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span><span class="s1">&#39;--series_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keys used to extract the series axis data (e.g. cycle or time)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-np&#39;</span><span class="p">,</span><span class="s1">&#39;--number_of_points&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;number_of_points&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Number of sample points used to extract the data&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">500</span> <span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-im&#39;</span><span class="p">,</span><span class="s1">&#39;--interpolation_method&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;interpolation_method&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Method used to interpolate the data to points&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d_series</span> <span class="o">=</span> <span class="n">plot_2d_series_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d_series</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="c1"># suppress the x and y variable request</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span><span class="s1">&#39;--x_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;x_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span><span class="s1">&#39;--y_data&#39;</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="s1">&#39;y_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_series_contour</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.plot_series_contour"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.plot_series_contour">[docs]</a>    <span class="k">def</span> <span class="nf">plot_series_contour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">dump_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dictionary_list</span> <span class="o">=</span> <span class="n">build_data_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dump_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dump_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">key_words</span><span class="p">)</span>
            <span class="n">tracer_t</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">tracer_grid</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">z_slice_location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: z_slice_location specified so length of dimension_keys must be 3&#39;</span><span class="p">)</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d_slice</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z_slice_location</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: z_slice_location specified is not specified so length of dimension_keys must be 2&#39;</span><span class="p">)</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
            <span class="n">series_data</span> <span class="o">=</span> <span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dictionary</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_file</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
            <span class="n">dictionary</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">)</span>
            <span class="n">dictionary_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">dictionary_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
            <span class="n">tracer_t</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">tracer_grid</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">z_slice_location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: z_slice_location specified so length of dimension_keys must be 3&#39;</span><span class="p">)</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d_slice</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">z_slice_location</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: z_slice_location specified is not specified so length of dimension_keys must be 2&#39;</span><span class="p">)</span>
                <span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span> <span class="o">=</span> <span class="n">extract_series_2d</span><span class="p">(</span><span class="n">dictionary_list</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">data_name</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">number_of_points</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interpolation_method</span><span class="p">)</span> 
            <span class="n">series_data</span> <span class="o">=</span> <span class="n">series_pair</span><span class="p">(</span><span class="n">tracer_t</span><span class="p">,</span> <span class="n">tracer_grid</span><span class="p">)</span>

        <span class="n">args</span><span class="o">.</span><span class="n">x_value_name</span><span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">args</span><span class="o">.</span><span class="n">y_value_name</span><span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">dimension_keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ploter_2d_series</span><span class="o">.</span><span class="n">plot_2d_series</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">series_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="interactive_dump_parser.run"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_dump_parser.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">input_string</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Run the program</span>

<span class="sd">        Optional input:</span>
<span class="sd">            input_string - A string to be parsed in favor of the command line program arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">input_string</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">input_string</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="interactive_tally_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser">[docs]</a><span class="k">class</span> <span class="nc">interactive_tally_parser</span><span class="p">:</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    This is an interactive tally parser and plotting class. It provides three</span>
<span class="sd">    basic interactive options:</span>
<span class="sd">        pickle generates a pickled python dictionary to be used for plotting</span>
<span class="sd">        iplot interactive plotting option based on a user defined option string</span>
<span class="sd">        plot provides command line dictionary plotting of pickled python dictionaries</span>

<span class="sd">    A user must supply:</span>
<span class="sd">        opppy_tally_parser a user define parser to extract cycle dictionary data from a user defined tally file</span>
<span class="sd">        option_string a user defined string the specifies dictionary plotting options</span>
<span class="sd">        argument_parser a user defined argparser object to attach the subparser options to</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opppy_tally_parser</span><span class="p">,</span> <span class="n">option_string</span><span class="p">,</span> <span class="n">argument_parser</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span> <span class="o">=</span> <span class="n">opppy_tally_parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_string</span> <span class="o">=</span> <span class="n">option_string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">argument_parser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subparser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s2">&quot;Tally options&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pickle_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_interactive_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subparser</span><span class="p">)</span>

<div class="viewcode-block" id="interactive_tally_parser.append_pickle"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.append_pickle">[docs]</a>    <span class="k">def</span> <span class="nf">append_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        append_pickle - </span>
<span class="sd">          This function generates/appends a opppy pickle file of dictionary</span>
<span class="sd">          data from an output file.</span>
<span class="sd">        </span>
<span class="sd">          arguments:</span>
<span class="sd">            args - Parsed input arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">data</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appending to the existing pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating a new pickle file - &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span>
    
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">__version__</span><span class="p">):</span>
          <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: pickle file does not match this version of OPPPY&quot;</span><span class="p">)</span>
          <span class="k">if</span> <span class="s1">&#39;version&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;was build with version&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">])</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot; has no version&quot;</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This version of OPPPY is &quot;</span><span class="p">,</span> <span class="n">__version__</span><span class="p">)</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Delete the old &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span> <span class="s2">&quot;file and rebuild it&quot;</span><span class="p">)</span>
          <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
        <span class="c1"># append new dictionary data to the pickle file</span>
        <span class="n">append_tally_dictionary</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">tally_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">append_date</span><span class="p">)</span>
    
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">,</span><span class="s2">&quot;wb&quot;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Output Data Saved To: &quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="interactive_tally_parser.pickle_tally_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.pickle_tally_parser">[docs]</a>    <span class="k">def</span> <span class="nf">pickle_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="n">pickle_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;pickle&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: pickle --pickle_file your_output_pickle_file.p --tally_files your_tally_files_to_pickle  &quot;</span><span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-tf&#39;</span><span class="p">,</span><span class="s1">&#39;--tally_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;tally_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;output files to generate/append the pickle file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_file&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Pickle file name to be created or appended to&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-ad&#39;</span><span class="p">,</span><span class="s1">&#39;--append_date&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;append_date&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Append the date and time to the output file name&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">pickle_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">append_pickle</span><span class="p">)</span></div>
 

<div class="viewcode-block" id="interactive_tally_parser.plot_tally_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.plot_tally_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Add a parser for the dictionary plotter to a user provided subparser</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot; A simple example: plot -pf your_pickle_file.p --dictionary_name mat_eng --x_data time --y_data mat_name  &quot;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span> <span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-tf&#39;</span><span class="p">,</span><span class="s1">&#39;--tally_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;tally_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;tally files to be parsed and plotted (tally_file1.txt tally_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-sk&#39;</span><span class="p">,</span><span class="s1">&#39;--series_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Series key string to access the data (i.e time or cycle)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-sv&#39;</span><span class="p">,</span><span class="s1">&#39;--series_value&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_value&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Series value to plot the data at (default is the last value of the series_key data)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span> <span class="o">=</span> <span class="n">plot_dictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">plot_parser</span><span class="p">)</span>
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_tally</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.plot_tally"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.plot_tally">[docs]</a>    <span class="k">def</span> <span class="nf">plot_tally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Command line based tally plotting tool.</span>
<span class="sd">    </span>
<span class="sd">        arguments:</span>
<span class="sd">            args parsed dictionary plotting arguments</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">raw_dictionary_data</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">raw_dictionary_names</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">tally_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">raw_dictionary_data</span><span class="p">,</span> <span class="n">raw_dictionary_names</span> <span class="o">=</span> <span class="n">build_tally_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">tally_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">pickle_file_name</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">raw_dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">raw_dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)))</span>

        <span class="c1"># build up plotting dictionary list and names</span>
        <span class="n">dictionary_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dictionary_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">raw_dictionary_data</span><span class="p">,</span><span class="n">raw_dictionary_names</span><span class="p">):</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">times</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">series_key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">series_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">time</span> <span class="o">&gt;=</span> <span class="n">args</span><span class="o">.</span><span class="n">series_value</span><span class="p">):</span>
                        <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">tally</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
                        <span class="n">dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally</span><span class="p">)</span>  
                        <span class="n">dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>
                        <span class="k">break</span>
                    
            <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
                <span class="n">tally</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally</span><span class="p">)</span>  
                <span class="n">dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">args</span><span class="o">.</span><span class="n">series_key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>



        <span class="c1"># plot dictionaries based on input arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">plot_dict</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="n">dictionary_data</span><span class="p">,</span><span class="n">dictionary_names</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.plot_interactive_tally_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.plot_interactive_tally_parser">[docs]</a>    <span class="k">def</span> <span class="nf">plot_interactive_tally_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
        <span class="n">plot_parser</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;iplot&#39;</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Load a previously created pickle files (your_run.p) for interactive plotting or a set of output files to be parsed and plotted&#39;</span><span class="p">)</span>
        <span class="n">input_type_parser</span> <span class="o">=</span> <span class="n">plot_parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-pf&#39;</span><span class="p">,</span><span class="s1">&#39;--pickle_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;pickle_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;pickle files to be plotted (run1.p run2.p etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span> <span class="p">)</span>
        <span class="n">input_type_parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-tf&#39;</span><span class="p">,</span><span class="s1">&#39;--tally_files&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;tally_files&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;tally files to be parsed and plotted (tally_file1.txt tally_file2.txt etc...)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
        
        <span class="n">plot_parser</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_interactive_tally</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.get_plot_option"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.get_plot_option">[docs]</a>    <span class="k">def</span> <span class="nf">get_plot_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Interactive request for valid plotting options</span>
<span class="sd">    </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
          <span class="n">opt</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Additional options (-h for list and -q to quit): &#39;</span><span class="p">)</span>
          <span class="n">input_args</span> <span class="o">=</span> <span class="n">opt</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
          <span class="n">parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interactive_plot_parser</span><span class="p">()</span>
          <span class="k">try</span><span class="p">:</span>
            <span class="n">args</span><span class="o">=</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">input_args</span><span class="p">)</span>
            <span class="k">break</span>
          <span class="k">except</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
          
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">quit</span><span class="p">:</span>
          <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    
        <span class="k">return</span> <span class="n">args</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.get_interactive_plot_parser"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.get_interactive_plot_parser">[docs]</a>    <span class="k">def</span> <span class="nf">get_interactive_plot_parser</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      return parser object that contains interactive plotting options</span>
<span class="sd">    </span>
<span class="sd">      &#39;&#39;&#39;</span>
    
      <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot; Output Plotting options &quot;</span><span class="p">,</span> 
        <span class="n">epilog</span> <span class="o">=</span><span class="s2">&quot; Specify the desired plotting options &quot;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-q&#39;</span><span class="p">,</span><span class="s1">&#39;--quit&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;quit&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;quit program&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span><span class="s1">&#39;--new&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;new&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;generate a new plot&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-bg&#39;</span><span class="p">,</span><span class="s1">&#39;--background&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;background&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;keep plot in background&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span><span class="s1">&#39;--plot&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;re-open plot&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bool</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-l&#39;</span><span class="p">,</span><span class="s1">&#39;--labels&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;legend_labels&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify the legend labels [line1_label, line2_label,...]&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-rs&#39;</span><span class="p">,</span><span class="s1">&#39;--resize&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;plot_size&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;specify the plot size [x_size, y_size]&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
      
    
      <span class="n">add_plot_options</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">parser</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.plot_interactive_tally"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.plot_interactive_tally">[docs]</a>    <span class="k">def</span> <span class="nf">plot_interactive_tally</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is an interactive plotter for a python dictionary.</span>
<span class="sd">        The plotting option are specified via an option string.</span>
<span class="sd">        </span>
<span class="sd">        arguments:</span>
<span class="sd">          args - argeparse data structure with pickle name info</span>
<span class="sd">          self.option_string - a string to be passed to get_plot_options for pre-designed plots</span>
<span class="sd">    </span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">raw_dictionary_data</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">raw_dictionary_names</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">tally_files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">raw_dictionary_data</span><span class="p">,</span> <span class="n">raw_dictionary_names</span> <span class="o">=</span> <span class="n">build_tally_dictionary_list</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">tally_files</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">opppy_parser</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">pickle_file_name</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">pickle_files</span><span class="p">:</span>
                <span class="n">raw_dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.p&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">raw_dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pickle_file_name</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)))</span>

        <span class="n">option_parser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_interactive_plot_parser</span><span class="p">()</span>
        <span class="n">option</span> <span class="o">=</span> <span class="n">option_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">([</span><span class="s2">&quot;--new&quot;</span><span class="p">])</span>
        <span class="n">ptype</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">new</span> <span class="ow">or</span> <span class="n">option</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="n">close</span><span class="p">()</span>
            <span class="n">plot_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">option_string</span><span class="p">)</span>
     
            <span class="n">xsize</span> <span class="o">=</span> <span class="mi">8</span>
            <span class="n">ysize</span> <span class="o">=</span> <span class="mi">5</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="n">ysize</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">PyPloter</span><span class="o">.</span><span class="n">switch_backend</span><span class="p">(</span><span class="s1">&#39;agg&#39;</span><span class="p">)</span>
                <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="n">ysize</span><span class="p">))</span>
    
            <span class="n">xlog_flag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ylog_flag</span> <span class="o">=</span> <span class="mi">0</span>
    
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">)):</span>
              <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dict_ploter</span><span class="o">.</span><span class="n">is_data_available</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">raw_dictionary_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
            
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span><span class="mi">2</span><span class="p">):</span>
              <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">counter</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">  </span><span class="si">%3i</span><span class="s1"> </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
              <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
    
            <span class="n">plot_num</span> <span class="o">=</span> <span class="n">get_option_num</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">plot_num</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">plot_args</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">plot_num</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">plot_args</span><span class="o">.</span><span class="n">series_value</span> <span class="o">=</span> <span class="n">get_option_series_value</span><span class="p">(</span><span class="n">plot_args</span><span class="o">.</span><span class="n">series_key</span><span class="p">,</span><span class="n">raw_dictionary_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">plot_args</span><span class="o">.</span><span class="n">series_key</span><span class="p">])</span>

            <span class="c1"># build up plotting dictionary list and names</span>
            <span class="n">dictionary_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">dictionary_names</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">raw_dictionary_data</span><span class="p">,</span><span class="n">raw_dictionary_names</span><span class="p">):</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">times</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">series_key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">series_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">time</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
                        <span class="k">if</span><span class="p">(</span><span class="n">time</span> <span class="o">&gt;=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">series_value</span><span class="p">):</span>
                            <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="n">tally</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="n">index</span><span class="p">]</span>
                            <span class="n">dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally</span><span class="p">)</span>  
                            <span class="n">dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">series_key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>
                            <span class="k">break</span>
                        
                <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
                    <span class="n">tally</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="s1">&#39;tally_cycle_data&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">dictionary_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tally</span><span class="p">)</span>  
                    <span class="n">dictionary_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">series_key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>


            <span class="k">if</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;select_key&quot;</span><span class="p">:</span>    
                <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dictionary_data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">plot_args</span><span class="o">.</span><span class="n">dictionary_name</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">keys</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">))),</span><span class="n">keys</span><span class="p">):</span> 
                  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                  <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%3i</span><span class="s1">  </span><span class="si">%-50s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span> <span class="o">=</span> <span class="n">get_key_num_vec</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    
          <span class="n">last_xmin</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_xmax</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_ymin</span> <span class="o">=</span> <span class="kc">None</span>
          <span class="n">last_ymax</span> <span class="o">=</span> <span class="kc">None</span>
    
          <span class="k">for</span> <span class="n">dictionary</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dictionary_data</span><span class="p">,</span> <span class="n">dictionary_names</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">dictionary_name</span><span class="p">]</span>
    
            <span class="n">xmin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">plabels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">xmin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
            <span class="n">xmax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
            <span class="n">ymin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
            <span class="n">ymax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
            <span class="c1"># material specific plot</span>
            <span class="k">for</span> <span class="n">yname</span> <span class="ow">in</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_value_names</span><span class="p">:</span>
              <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">plot_args</span><span class="o">.</span><span class="n">x_value_name</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_x</span><span class="p">)</span>
              <span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="nb">min</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
              <span class="n">ymax</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="nb">max</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
              <span class="n">plabels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">yname</span><span class="p">)</span>
              <span class="k">if</span> <span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">no_y_names</span><span class="p">):</span>
                  <span class="n">plabels</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
              <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">yname</span><span class="p">])</span><span class="o">*</span><span class="n">plot_args</span><span class="o">.</span><span class="n">scale_y</span><span class="p">)</span>
    
            <span class="n">xmin</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">xmin</span><span class="p">)</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ymin</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">ymin</span><span class="p">)</span>
            <span class="n">ymax</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">ymax</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">last_xmin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">last_xmin</span><span class="p">,</span><span class="n">xmin</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
              <span class="n">xmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">last_xmax</span><span class="p">,</span><span class="n">xmax</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">last_ymin</span><span class="p">,</span><span class="n">ymin</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
              <span class="n">ymax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">last_ymax</span><span class="p">,</span><span class="n">ymax</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
            <span class="k">else</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="n">xmin</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
              <span class="n">xmax</span> <span class="o">=</span> <span class="n">xmax</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="n">ymin</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
              <span class="n">ymax</span> <span class="o">=</span> <span class="n">ymax</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">last_xmin</span> <span class="o">=</span> <span class="n">xmin</span>
            <span class="n">last_xmax</span> <span class="o">=</span> <span class="n">xmax</span>
            <span class="n">last_ymin</span> <span class="o">=</span> <span class="n">ymin</span>
            <span class="n">last_ymax</span> <span class="o">=</span> <span class="n">ymax</span>
    
            <span class="n">xlab</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">x_label</span>
            <span class="n">ylab</span> <span class="o">=</span> <span class="n">plot_args</span><span class="o">.</span><span class="n">y_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xmin</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
              <span class="n">xmax</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_limits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">ymin</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> 
              <span class="n">ymax</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_limits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">x_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">xlab</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">x_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">y_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">ylab</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">y_label</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plabels</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">):</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You specified more labels then there are plots&quot;</span><span class="p">)</span>
              <span class="k">else</span><span class="p">:</span>
                  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">)):</span>
                      <span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">legend_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">plot_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">plot_size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">option</span><span class="o">.</span><span class="n">plot_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
              <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
                <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
              <span class="n">logplot</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">log_x</span><span class="p">,</span><span class="n">option</span><span class="o">.</span><span class="n">log_y</span><span class="p">,</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    
            <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">data_file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
              <span class="n">output_file_temp</span> <span class="o">=</span> <span class="n">option</span><span class="o">.</span><span class="n">data_file_name</span> 
              <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="n">outfile_name</span> <span class="o">=</span> <span class="n">output_file_temp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">plabels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span><span class="s1">&#39;num&#39;</span><span class="p">)</span>
                <span class="n">outfile</span> <span class="o">=</span>  <span class="nb">open</span><span class="p">(</span><span class="n">outfile_name</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;# &quot;</span><span class="p">,</span> <span class="n">xlab</span><span class="p">,</span> <span class="n">ylab</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%15e</span><span class="s1">  </span><span class="si">%15e</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span> <span class="n">file</span><span class="o">=</span><span class="n">outfile</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data written to - &quot;</span><span class="p">,</span> <span class="n">outfile_name</span><span class="p">)</span>
                <span class="n">outfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
      
            <span class="n">xlabel</span><span class="p">(</span><span class="n">xlab</span><span class="p">)</span>
            <span class="n">ylabel</span><span class="p">(</span><span class="n">ylab</span><span class="p">)</span>
            
            <span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">draw_frame</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">xlim</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">)</span>
            <span class="n">ylim</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
              <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
            <span class="n">draw</span><span class="p">()</span>
    
    
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">figure_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">savefig</span><span class="p">(</span><span class="n">option</span><span class="o">.</span><span class="n">figure_name</span><span class="p">)</span>
          
          <span class="k">if</span> <span class="ow">not</span> <span class="n">option</span><span class="o">.</span><span class="n">hide_plot</span><span class="p">:</span>
            <span class="n">show</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
          <span class="n">option</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_plot_option</span><span class="p">()</span>
          <span class="k">if</span> <span class="n">option</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="n">figure</span><span class="p">()</span>
          <span class="k">else</span><span class="p">:</span>
            <span class="n">clf</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.get_plot_options"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.get_plot_options">[docs]</a>    <span class="k">def</span> <span class="nf">get_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_string</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      Get pre-formated plotting options for the interactive ploter</span>
<span class="sd">       </span>
<span class="sd">      Input Options:</span>
<span class="sd">        label_string preformated string for expected data in a</span>
<span class="sd">        dictionary</span>
<span class="sd">    </span>
<span class="sd">      This expects a two column semicolon (;) separated text</span>
<span class="sd">      format string. The first column is an arbitrary string that</span>
<span class="sd">      will be printed by the interactive plotter as a plot the</span>
<span class="sd">      user can pick. The second column in a dictionary plotting</span>
<span class="sd">      command (more details in the examples below).</span>
<span class="sd">    </span>
<span class="sd">      examples:</span>
<span class="sd">        &quot;your first fancy plot name; -sk time -dn your_dictionary_key -x your_x_data_key   -xlab &quot;time [s]&quot;  -y your_y_data_key  -ylab &quot;RSS [%]&quot;;</span>
<span class="sd">        &quot;your second fancy plot name; -sk cycle -dn your_dictionary_key -x bins   -xlab &quot;bin [#]&quot;  -y select_key  -ylab &quot;tally_count [#]&quot;;</span>
<span class="sd">    </span>
<span class="sd">     The dictionary plotting command has some basic requirements</span>
<span class="sd">     include a dictionary name (-dn) the x variable key (-x), the y</span>
<span class="sd">     variable key (-y), the x axis lable (-xlab), and the y axis</span>
<span class="sd">     label (-y). There are more details about available plotting</span>
<span class="sd">     options in plot_dictionary.py. The &quot;-y select_key&quot; value is a</span>
<span class="sd">     magic key word that tells the interactive ploter to provide a</span>
<span class="sd">     list of all y_data options for the designated dictionary.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">plot_labels</span> <span class="o">=</span> <span class="p">[]</span>
    
      <span class="n">label_file</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">label_string</span><span class="p">)</span>
      <span class="n">raw</span> <span class="o">=</span> <span class="n">label_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">raw</span><span class="p">:</span>
          <span class="n">lines</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_tally_plot_args</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">plot_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">plot_labels</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.parse_tally_plot_args"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.parse_tally_plot_args">[docs]</a>    <span class="k">def</span> <span class="nf">parse_tally_plot_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_string</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">      Returns a set of parsed dictionary plotting options from an input_string</span>
<span class="sd">    </span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot; Tally Plotting options &quot;</span><span class="p">,</span> 
        <span class="n">epilog</span> <span class="o">=</span><span class="s2">&quot; Specify the desired plotting options &quot;</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-dn&#39;</span><span class="p">,</span><span class="s1">&#39;--dictionary_name&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;dictionary_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary that the plotting data is contained in&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span><span class="s1">&#39;--x_data&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;x_value_name&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary data to be plotted on the x axis.&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span><span class="s1">&#39;--y_data&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;y_value_names&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;dictionary data to be plotted on the y axis.&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-sk&#39;</span><span class="p">,</span><span class="s1">&#39;--series_key&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_key&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Series key string to access the data (i.e time or cycle)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
      <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-sv&#39;</span><span class="p">,</span><span class="s1">&#39;--series_value&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;series_value&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Series value to plot the data at (default is the last value of the series_key data)&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
      <span class="n">add_plot_options</span><span class="p">(</span><span class="n">parser</span><span class="p">);</span>
    
      <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">input_string</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="interactive_tally_parser.run"><a class="viewcode-back" href="../../opppy.html#opppy.interactive_utils.interactive_tally_parser.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">input_string</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">input_string</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">input_string</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">args</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></div></div>


</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Mathew Cleveland

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>